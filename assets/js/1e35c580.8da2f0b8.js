"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8013],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>d});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var l=a.createContext({}),i=function(t){var e=a.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):s(s({},e),t)),n},u=function(t){var e=i(t.components);return a.createElement(l.Provider,{value:e},t.children)},p="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},g=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,l=t.parentName,u=c(t,["components","mdxType","originalType","parentName"]),p=i(n),g=r,d=p["".concat(l,".").concat(g)]||p[g]||m[g]||o;return n?a.createElement(d,s(s({ref:e},u),{},{components:n})):a.createElement(d,s({ref:e},u))}));function d(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,s=new Array(o);s[0]=g;var c={};for(var l in e)hasOwnProperty.call(e,l)&&(c[l]=e[l]);c.originalType=t,c[p]="string"==typeof t?t:r,s[1]=c;for(var i=2;i<o;i++)s[i]=n[i];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},7404:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>c,toc:()=>i});var a=n(7462),r=(n(7294),n(3905));const o={},s="state",c={unversionedId:"react-learning/state",id:"react-learning/state",title:"state",description:"\u66f4\u65b0state -- setState",source:"@site/docs/react-learning/state.md",sourceDirName:"react-learning",slug:"/react-learning/state",permalink:"/docs/react-learning/state",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/react-learning/state.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"fragment",permalink:"/docs/react-learning/fragment"},next:{title:"state\u63d0\u5347\uff08\u72b6\u6001\u63d0\u5347\uff09",permalink:"/docs/react-learning/stateHoisting"}},l={},i=[{value:"\u66f4\u65b0state -- setState",id:"\u66f4\u65b0state----setstate",level:2},{value:"\u8c03\u7528 setState \u53d1\u751f\u4e86\u4ec0\u4e48",id:"\u8c03\u7528-setstate-\u53d1\u751f\u4e86\u4ec0\u4e48",level:2}],u={toc:i},p="wrapper";function m(t){let{components:e,...n}=t;return(0,r.kt)(p,(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"state"},"state"),(0,r.kt)("h2",{id:"\u66f4\u65b0state----setstate"},"\u66f4\u65b0state -- setState"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7069399397661933599#comment"},"https://juejin.cn/post/7069399397661933599#comment"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://blog.csdn.net/u011272795/article/details/80882567"},"https://blog.csdn.net/u011272795/article/details/80882567"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"setState\u8fd9\u4e2a\u65b9\u6cd5\u5728\u8c03\u7528\u7684\u65f6\u5019\u662f\u540c\u6b65\u7684\uff0c\u4f46\u662f\u5f15\u8d77React\u7684\u72b6\u6001\u66f4\u65b0\u662f\u5f02\u6b65\u7684 \u3010React\u72b6\u6001\u66f4\u65b0\u662f\u5f02\u6b65\u7684\u3011")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u5bf9\u3010\u540c\u4e00\u4e2a\u503c\u3011\u8fdb\u884c\u591a\u6b21 setState\uff0c setState \u7684\u3010\u6279\u91cf\u66f4\u65b0\u3011\u7b56\u7565\u4f1a\u5bf9\u5176\u8fdb\u884c\u8986\u76d6(\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5bf9\u8c61\u65f6\u540e\u9762\u4f1a\u8986\u76d6\u524d\u9762\uff0c \u800c\u5f53\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u51fd\u6570\u65f6\u4e0d\u4f1a\u8986\u76d6\uff01)\uff0c\u53d6\u6700\u540e\u4e00\u6b21\u7684\u6267\u884c\u7ed3\u679c")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react'\n\nclass App extends React.Component {\n  constructor() {\n    super(...arguments)\n    this.state = {\n      count: 0\n    }\n  }\n\n  componentDidMount() {\n    // a\n    this.setState({count: this.state.count + 1});\n    console.log('1:' + this.state.count) // setState\u66f4\u65b0\u72b6\u6001\u7684\u64cd\u4f5c\u662f\u5f02\u6b65\u7684\uff0c \u6240\u4ee5\u8fd9\u91cc\u662f0\n    // b\n    this.setState({count: this.state.count + 1});\n    console.log('2:' + this.state.count) // setState\u66f4\u65b0\u72b6\u6001\u7684\u64cd\u4f5c\u662f\u5f02\u6b65\u7684\uff0c \u6240\u4ee5\u8fd9\u91cc\u662f0\n\n\n    setTimeout(() => {\n      // c\n      console.log('c1');\n      console.log(this.state.count);\n      this.setState({count: this.state.count + 1}, () => {\n        console.log('9\uff1a' + this.state.count);\n      });\n      console.log('3:' + this.state.count) // setState\u66f4\u65b0state\u72b6\u6001\u662f\u5f02\u6b65\uff0c\u6240\u4ee5\u5728\u8fd9\u91cc\u62ff\u5230\u7684\u4ecd\u7136\u662f d e\u7684\u7ed3\u679c\n    }, 0) // \u4ee3\u7801\u6267\u884c\u5230setTimeOut\u7684\u65f6\u5019\uff0c \u7531\u4e8esetTimeOut\u662f\u5f02\u6b65\u5b8f\u4efb\u52a1\uff0c\u6240\u4ee5\u4f1a\u653e\u5230\u4efb\u52a1\u961f\u5217\u4e2d\uff0c \u7b49\u5f85\u4e3b\u7ebf\u7a0b\u540c\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u540e\u518d\u6267\u884c\n\n    setTimeout(() => {\n      // c\n      console.log('c2');\n      console.log(this.state.count); // 3\n      this.setState({count: this.state.count + 1}, () => {\n        console.log('10\uff1a' + this.state.count);\n      });\n      console.log('4:' + this.state.count)\n    }, 0)\n\n\n    // d\n    this.setState(preState => {\n      console.log('preState\uff1a'); // preState: {count: 1}\n      console.log(preState); \n      return { count: preState.count + 1 } // 2\n    }, () => {\n      console.log('5:' + this.state.count) // \u9ed8\u8ba4 \u5bf9\u3010\u540c\u4e00\u4e2a\u503c\u3011\u8fdb\u884c\u4fee\u6539 setState \u662f\u5904\u4e8e\u6279\u91cf\u66f4\u65b0\u6a21\u5f0f\uff0c \u6700\u7ec8\u8fd4\u56de\u7684\u503c\u662f \u6279\u91cf\u66f4\u65b0\u7ed3\u675f\u540e\u7684\u7ed3\u679c\n      // \u7b2c\u4e00\u4e2a\u53c2\u6570 \u662f\u5bf9\u8c61\u8fd8\u662f\u51fd\u6570\u7684 \u533a\u522b\u53ea\u662f  \u5bf9\u8c61\u65f6\u4f1a\u8986\u76d6\u4e4b\u524d\u7684\u64cd\u4f5c\uff0c \u800c\u51fd\u6570\u65f6\u4e0d\u4f1a\u8986\u76d6\uff0c\u6bcf\u6b21\u90fd\u80fd\u62ff\u5230\u524d\u4e00\u6b21\u66f4\u65b0\u540e\u7684\u503c\uff01\n      // \u6240\u4ee5 d e \u8fd9\u91cc\u4e24\u6b21\u56de\u8c03\u7684\u7ed3\u679c\u90fd\u662f3\n    })\n\n\n    console.log('6:' + this.state.count) // setState\u66f4\u65b0\u72b6\u6001\u7684\u64cd\u4f5c\u662f\u5f02\u6b65\u7684\uff0c \u6240\u4ee5\u8fd9\u91cc\u662f0\n\n\n    // e\n    this.setState(preState => {\n      console.log('preState2\uff1a');\n      console.log(preState); // preState: {count: 2}\n      return { count: preState.count + 1 } // 3\n\n    }, () => {\n      console.log('7:' + this.state.count) // // \u9ed8\u8ba4 setState \u662f\u5904\u4e8e\u6279\u91cf\u66f4\u65b0\u6a21\u5f0f\uff0c \u6700\u7ec8\u8fd4\u56de\u7684\u503c\u662f \u6279\u91cf\u66f4\u65b0\u540e\u7684\u7ed3\u679c\n      // \u7b2c\u4e00\u4e2a\u53c2\u6570 \u662f\u5bf9\u8c61\u8fd8\u662f\u51fd\u6570\u7684 \u533a\u522b\u53ea\u662f  \u5bf9\u8c61\u65f6\u4f1a\u8986\u76d6\u4e4b\u524d\u7684\u64cd\u4f5c\uff0c \u800c\u51fd\u6570\u65f6\u4e0d\u4f1a\u8986\u76d6\uff0c\u6bcf\u6b21\u90fd\u80fd\u62ff\u5230\u524d\u4e00\u6b21\u66f4\u65b0\u540e\u7684\u503c\uff01\n      // \u6240\u4ee5 d e \u8fd9\u91cc\u4e24\u6b21\u56de\u8c03\u7684\u7ed3\u679c\u90fd\u662f3\n    })\n\n\n    console.log('8:' + this.state.count) // setState\u66f4\u65b0\u72b6\u6001\u7684\u64cd\u4f5c\u662f\u5f02\u6b65\u7684\uff0c \u6240\u4ee5\u8fd9\u91cc\u662f0\n  }\n\n  render() {\n    return <></>\n  }\n}\n\nexport default App\n")),(0,r.kt)("h2",{id:"\u8c03\u7528-setstate-\u53d1\u751f\u4e86\u4ec0\u4e48"},"\u8c03\u7528 setState \u53d1\u751f\u4e86\u4ec0\u4e48"))}m.isMDXComponent=!0}}]);